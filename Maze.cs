using System.Drawing;

namespace WindowsFormsApplication1
{
    public class Maze
    {
        private int[,] maze;
        private Block block;
        private Image fruit, ammo;

        public Maze()
        {
            this.maze = new int[31, 29]
            {
                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
                {1,5,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,5,1},
                {1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1},
                {1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1},
                {1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1},
                {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
                {1,0,1,1,1,1,0,1,1,3,1,1,1,1,1,1,1,1,1,3,1,1,0,1,1,1,1,0,1},
                {1,0,1,1,1,1,0,1,1,3,3,3,3,1,1,1,3,3,3,3,1,1,0,1,1,1,1,0,1},
                {1,0,0,0,0,0,0,0,1,3,3,3,3,3,1,3,3,3,3,3,1,0,0,0,0,0,0,0,1},
                {1,1,1,1,1,1,1,0,1,1,3,3,3,3,3,3,3,3,3,1,1,0,1,1,1,1,1,1,1},
                {3,3,3,3,3,3,1,0,1,1,1,3,3,3,3,3,3,3,1,1,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,1,3,3,3,3,3,3,3,3,3,1,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,3,4,3,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,4,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,3,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {3,3,3,3,3,3,3,0,3,3,1,3,3,4,4,4,3,3,1,3,3,0,3,3,3,3,3,3,3},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,1,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,1,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,3,1,3,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,1,1,1,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,1,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
                {1,0,1,1,1,1,1,0,1,1,1,1,0,3,1,3,0,1,1,1,1,0,1,1,1,1,1,0,1},
                {1,0,0,4,1,4,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,4,1,4,0,0,1},
                {1,1,1,0,1,0,3,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,3,0,1,0,1,1,1},
                {1,0,0,0,0,0,0,4,1,0,0,0,1,1,1,1,1,0,0,0,1,4,0,0,0,0,0,0,1},
                {1,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0,1},
                {1,0,1,1,1,1,1,1,1,1,1,1,0,3,1,3,0,1,1,1,1,1,1,1,1,1,1,0,1},
                {1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,1},
                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}

                //0 - Fruit
                //1 - Wall
                //3 - Trap zone for Yellow Ghost
                //4 - Trap zone for Red Ghost
                //5 - Ammo spot
                //9 - No fruit area
            };
            block = new Block(0, 0);
            ammo = (Properties.Resources.Ammo);
            fruit = (Properties.Resources.Fruit);
        }

        public void DrawMaze(Graphics grfx)
        {
            for (int i = 0; i < this.maze.GetLength(0); i++)
                for (int j = 0; j < this.maze.GetLength(1); j++)
                {
                    if (this.maze[i, j] == 1)
                    {
                        this.block.SetX(j*20);
                        this.block.SetY(i*20);
                        this.block.DrawItem(grfx);
                    }

                    if (this.maze[i, j] == 0)
                        grfx.DrawImage(fruit, j*20 + 5, i*20 + 5, 10, 10);

                    if (this.maze[i, j] == 5)
                        grfx.DrawImage(ammo, j*20, i*20, 20, 20);
                }
        }

        public void RestartMaze()
        {
            this.maze = new int[31, 29]
            {
                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1},
                {1,5,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,5,1},
                {1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1},
                {1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1},
                {1,0,1,1,1,1,0,1,1,1,1,1,0,1,1,1,0,1,1,1,1,1,0,1,1,1,1,0,1},
                {1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1},
                {1,0,1,1,1,1,0,1,1,3,1,1,1,1,1,1,1,1,1,3,1,1,0,1,1,1,1,0,1},
                {1,0,1,1,1,1,0,1,1,3,3,3,3,1,1,1,3,3,3,3,1,1,0,1,1,1,1,0,1},
                {1,0,0,0,0,0,0,0,1,3,3,3,3,3,1,3,3,3,3,3,1,0,0,0,0,0,0,0,1},
                {1,1,1,1,1,1,1,0,1,1,3,3,3,3,3,3,3,3,3,1,1,0,1,1,1,1,1,1,1},
                {3,3,3,3,3,3,1,0,1,1,1,3,3,3,3,3,3,3,1,1,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,1,3,3,3,3,3,3,3,3,3,1,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,3,4,3,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,4,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,3,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {3,3,3,3,3,3,3,0,3,3,1,3,3,4,4,4,3,3,1,3,3,0,3,3,3,3,3,3,3},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,1,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,1,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,3,3,3,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,3,1,3,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {3,3,3,3,3,3,1,0,1,3,3,3,3,1,1,1,3,3,3,3,1,0,1,3,3,3,3,3,3},
                {1,1,1,1,1,1,1,0,1,3,1,1,1,1,1,1,1,1,1,3,1,0,1,1,1,1,1,1,1},
                {1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1},
                {1,0,1,1,1,1,1,0,1,1,1,1,0,3,1,3,0,1,1,1,1,0,1,1,1,1,1,0,1},
                {1,0,0,4,1,4,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,4,1,4,0,0,1},
                {1,1,1,0,1,0,3,0,1,0,1,1,1,1,1,1,1,1,1,0,1,0,3,0,1,0,1,1,1},
                {1,0,0,0,0,0,0,4,1,0,0,0,1,1,1,1,1,0,0,0,1,4,0,0,0,0,0,0,1},
                {1,0,1,1,1,1,1,1,1,1,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,1,0,1},
                {1,0,1,1,1,1,1,1,1,1,1,1,0,3,1,3,0,1,1,1,1,1,1,1,1,1,1,0,1},
                {1,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,1},
                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
            };
        }

        public int[,] GetMaze()
        {     
            return this.maze;
        }

        public bool GameWin()
        {
            bool found = false;

            for (int i = 0; i < this.maze.GetLength(0); i++)
                for (int j = 0; j < this.maze.GetLength(1); j++)
                    if (this.maze[i, j] == 0)
                        found = true;

            return !found;
        }
    }
}
